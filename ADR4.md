# ADR - [Выбор языка программирования для клиентской части]

Участники: Лежнин Попов Смаилов

Дата: 25.09.2024

Статус: Code review

## Контекст
- Проблемы и задачи
    - Масштабируемость: С учетом потенциального роста числа пользователей, важно выбрать архитектуру,
      которая сможет поддерживать высокую нагрузку и обеспечивать стабильную работу приложения.
    - Производительность: Игровой процесс требует минимальной задержки, особенно в многопользовательском режиме.
    - Архитектура должна обеспечивать быструю обработку запросов и обновление состояния игры.
    - Разработка и поддержка: Выбранная архитектура должна быть удобной для команды разработчиков,
      обеспечивая легкость в развертывании, тестировании и обновлении приложения.
- Ограничения и предпосылки
    - Технические ограничения: Необходимо учитывать доступные технологии и инструменты, а также уровень квалификации
      команды разработчиков. Например, бессерверные архитектуры могут потребовать знаний в области облачных технологий.
    - Безопасность: При реализации многопользовательского режима важно обеспечить защиту данных пользователей и
      предотвратить мошенничество в игре.
    - Бюджетные ограничения: Разные архитектурные подходы могут иметь различные затраты на внедрение и поддержку.
      Например, серверные решения могут требовать значительных инвестиций в инфраструктуру. Учитывая, что проект
      не имеет выделенного бюджета, наша команда обязана учитывать использование бесплатных или экономически
      эффективных решений, как для разработки, так и для дальнейшего поддержания системы.
    - Пользовательский опыт: Архитектура должна поддерживать функции, которые улучшают взаимодействие с пользователем,
      такие как возможность играть с друзьями или против случайных соперников.
    - Состав команды: В команду входят три разработчика с навыками PHP, JavaScript, Go, C++, SQL и Python.

## Рассматриваемые варианты
- ### Java
  - Преимущества: 
      - Хорошо известный язык с обширной экосистемой и поддержкой многоплатформенных приложений. 
      - Высокая производительность благодаря JVM и хорошая поддержка графических библиотек.
  - Недостатки: 
      - Требует установки JVM на клиентской стороне, что может добавить сложности для конечных пользователей.
- ### C++
  - Преимущества: 
      - Высокая производительность, хороший контроль над памятью и низкоуровневая оптимизация. 
      - Подходит для высокоинтенсивных приложений и игр.
  - Недостатки: 
      - Более сложен в разработке и поддержке. 
      - Безопасность памяти требует значительных усилий со стороны разработчиков.
- ### JavaScript (TypeScript)
  - Преимущества: 
      - Прямой доступ к DOM и широкое использование для веб-приложений. 
      - TypeScript добавляет статическую типизацию, что улучшает качество кода. 
      - Поддержка всех браузеров без необходимости установки дополнительных зависимостей.
  - Недостатки: 
      - JavaScript иногда медленнее других языков. 
      - Для сложных приложений может потребоваться значительное управление асинхронными операциями.
- ### Rust
  - Преимущества: 
      - Безопасность памяти на уровне компилятора, высокая производительность. 
      - Rust становится всё более популярным для написания высокопроизводительных веб-приложений через WebAssembly (WASM).
  - Недостатки: 
      - Сложнее в освоении по сравнению с более традиционными языками. 
      - Меньшее количество готовых решений для клиентской части по сравнению с JavaScript.
- ### Kotlin
  - Преимущества: 
      - Современный язык с лаконичным синтаксисом, совместимостью с Java и JVM, что делает его хорошим выбором для кросс-платформенных приложений.
  - Недостатки: 
      - Ограниченная поддержка вне Android и JVM по сравнению с JavaScript. 
      - Не так широко используется для веб-приложений.
- ### C
  - Преимущества: 
      - Высокая производительность, низкоуровневый доступ к системе.
  - Недостатки: 
      - Устаревший для большинства клиентских веб-приложений, сложен в поддержке, отсутствие встроенной поддержки для работы с веб-технологиями.
- ### C#
  - Преимущества: 
      - Широко используется для разработки игр (Unity), поддержка кросс-платформенных приложений, высокий уровень абстракции.
  - Недостатки: 
      - Требует установки дополнительных зависимостей на клиентской стороне (например, .NET runtime), менее удобен для веб-приложений по сравнению с JavaScript.
- ### Python
  - Преимущества: 
      - Простота использования, широкая поддержка библиотек и сообществ. 
      - Хорошо подходит для быстрого прототипирования.
  - Недостатки: 
      - Не идеален для клиентских приложений, медленнее по производительности по сравнению с компилируемыми языками, требует дополнительных инструментов для работы в браузере (например, через WASM).
- ### WASM (WebAssembly)
  - Преимущества: 
      - Совместимость с различными языками (включая Rust, C, C++, Python), высокая производительность, возможность запуска почти нативного кода в браузере. Подходит для игр, требующих высокую производительность.
  - Недостатки: 
      - Сложнее в настройке и отладке, чем использование JavaScript/TypeScript напрямую. 
      - Требует дополнительных знаний для интеграции в веб-приложения.


## Решение

Выбор языка программирования для реализации клиентской части онлайн-версии игры "Шашки" остановился на TypeScript. Это решение обусловлено следующими факторами:  
TypeScript предоставляет статическую типизацию, которая помогает избежать множества ошибок на этапе компиляции и облегчает поддержку крупного кода.  
Команда имеет опыт работы с JavaScript, а переход на TypeScript не потребует значительных временных затрат, так как язык является надмножеством JavaScript.  
TypeScript активно поддерживается сообществом и предлагает множество библиотек и инструментов для разработки.

## Обоснование

TypeScript обеспечивает преимущества JavaScript, дополняя их статической типизацией, что улучшает качество кода и позволяет избежать типичных ошибок, характерных для динамических языков. Кроме того, использование TypeScript обеспечивает улучшенную поддержку крупных проектов благодаря автодополнению и проверке типов в IDE, что упрощает разработку и сопровождение клиентской части игры. TypeScript является распространенным выбором для современных веб-приложений, что позволяет использовать широкий спектр готовых решений для быстрого создания и отладки интерфейса.

## Последствия

### Положительные последствия

- Уменьшение числа ошибок за счет статической типизации и улучшенной поддержки в инструментах разработки.
- Упрощение процесса разработки за счет использования знакомого синтаксиса и экосистемы JavaScript.
- Улучшенная читаемость и поддерживаемость кода в долгосрочной перспективе.

### Oтрицательные последствия

- Возможное увеличение времени компиляции по сравнению с JavaScript.
- Дополнительные затраты на настройку и поддержку инструментов компиляции и конфигурации проекта для TypeScript.

### Риски

- Риск неправильного использования типов, что может привести к проблемам с логикой приложения.
- Риск задержек в разработке, если возникнут сложности с интеграцией новых библиотек, которые плохо поддерживают TypeScript.
- Возможные трудности при интеграции с инструментами или библиотеками, которые рассчитаны на чистый JavaScript.

## Затронутые области

- Клиентская архитектура приложения  
- Пользовательский интерфейс  
- Производительность клиента  
- Поддержка и масштабируемость клиентской части

## История

Основные обсуждения, приведшие к выбору TypeScript для клиентской части разработки игры "Шашки":  
- Опыт команды: Команда имеет опыт работы с JavaScript, что позволяет сократить время на обучение TypeScript.  
- Статическая типизация: TypeScript помогает предотвратить многие ошибки на этапе разработки, что особенно важно при создании стабильной многопользовательской игры.  
- Современные подходы: TypeScript активно используется для создания современных веб-приложений, что соответствует потребностям проекта.  
- Масштабируемость: TypeScript облегчает поддержку кода на протяжении всего жизненного цикла проекта, что критично при добавлении новых функций.  
- Альтернативы: Рассмотренные языки (C++, Kotlin, Rust) оказались либо слишком сложными для клиентской части, либо требовали значительных ресурсов на освоение. JavaScript был отвергнут в пользу TypeScript из-за преимуществ последнего в плане безопасности и поддержки крупного кода.

Эти факторы привели к окончательному решению использовать TypeScript для клиентской части.
