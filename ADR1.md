# ADR - [Выбор архитектурного подхода]

Участники: Лежнин Попов Смаилов

Дата: 19.09.2024

Статус: In Progress

## Контекст
- Проблемы и задачи
    - Масштабируемость: С учетом потенциального роста числа пользователей, важно выбрать архитектуру,
      которая сможет поддерживать высокую нагрузку и обеспечивать стабильную работу приложения.
    - Производительность: Игровой процесс требует минимальной задержки, особенно в многопользовательском режиме.
    - Архитектура должна обеспечивать быструю обработку запросов и обновление состояния игры.
    - Разработка и поддержка: Выбранная архитектура должна быть удобной для команды разработчиков,
      обеспечивая легкость в развертывании, тестировании и обновлении приложения.
- Ограничения и предпосылки
    - Технические ограничения: Необходимо учитывать доступные технологии и инструменты, а также уровень квалификации
      команды разработчиков. Например, бессерверные архитектуры могут потребовать знаний в области облачных технологий.
    - Безопасность: При реализации многопользовательского режима важно обеспечить защиту данных пользователей и
      предотвратить мошенничество в игре.
    - Бюджетные ограничения: Разные архитектурные подходы могут иметь различные затраты на внедрение и поддержку.
      Например, серверные решения могут требовать значительных инвестиций в инфраструктуру. Учитывая, что проект
      не имеет выделенного бюджета, наша команда обязана учитывать использование бесплатных или экономически
      эффективных решений, как для разработки, так и для дальнейшего поддержания системы.
    - Пользовательский опыт: Архитектура должна поддерживать функции, которые улучшают взаимодействие с пользователем,
      такие как возможность играть с друзьями или против случайных соперников.
    - Состав команды: В команду входят три разработчика с навыками PHP, JavaScript, Go, C++, SQL и Python.


## Рассматриваемые варианты

- Бессерверный
  Бессерверные вычисления представляют собой модель разработки приложений, при которой разработчики не управляют
  серверами напрямую. Вместо этого, вся инфраструктура и управление ресурсами выполняются сторонним облачным
  провайдером. Это позволяет разработчикам сосредоточиться на написании кода и разработке бизнес-логики, не отвлекаясь
  на задачи управления серверами, такие как балансировка нагрузки и безопасность. Бессерверные вычисления особенно
  эффективны для приложений, требующих высокой масштабируемости и способности обрабатывать большие объемы данных в
  реальном времени.
- Серверный
  Серверные вычисления подразумевают традиционную архитектуру, где приложения размещаются на выделенных серверах. В этом
  случае разработчики должны управлять серверной инфраструктурой, что может включать в себя настройку, обслуживание и
  масштабирование серверов в зависимости от потребностей приложения. Серверная модель требует больше ресурсов на
  управление и может быть менее гибкой по сравнению с бессерверной архитектурой, особенно при изменении нагрузки на
  приложение.
- P2P
  P2P (Peer-to-Peer) или одноранговая сеть — это модель сетевого взаимодействия, где устройства (пиры) могут
  обмениваться данными непосредственно друг с другом без необходимости в центральном сервере. Каждый узел в сети может
  выполнять как функции клиента, так и сервера, что позволяет эффективно делиться ресурсами и данными. Эта технология
  широко используется для обмена файлами через интернет (например, торрент-клиенты), а также в распределенных
  вычислениях и криптовалютах. Одним из ключевых преимуществ P2P является его устойчивость к сбоям: если один узел
  выходит из строя, остальные продолжают функционировать

## Решение

- Серверный

## Обоснование

Оставить ключевые плюсы и минусы каждого варианта
Выбор серверного подхода для разработки веб-игры в шашки был обусловлен несколькими ключевыми факторами, которые
обеспечивают надежность, производительность и безопасность игрового процесса.
Альтернативы и их плюсы и минусы

### 1. Бессерверный

#### Плюсы:

- Снижение затрат на инфраструктуру: Отсутствие необходимости в управлении серверами может снизить затраты на хостинг и
  обслуживание.

#### Минусы:

- Масштабируемость: Возникнут проблемы с добавлением турниров, рейтингов, микротранзакций

### 2. Серверный (выбранный вариант)

#### Плюсы:

- Контроль над состоянием игры: Централизованное управление состоянием игры позволяет обеспечить синхронизацию между
  игроками и минимизировать задержки.
- Безопасность: Легче реализовать меры безопасности для защиты данных пользователей и предотвращения мошенничества.
- Производительность: Высокая производительность благодаря возможности оптимизации серверной логики и обработки
  запросов.
- Масштабируемость: Отсутствуют проблемы с добавлением турниров, рейтингов, микротранзакций

#### Минусы:

- Затраты на инфраструктуру: Необходимость в управлении серверами может увеличить затраты на хостинг и обслуживание.
- Сложность масштабирования: Масштабирование может потребовать дополнительных усилий по настройке серверов и
  балансировке нагрузки.

### 3. P2P

#### Плюсы:

- Прямое взаимодействие между игроками: Позволяет избежать задержек, связанных с передачей данных через централизованный
  сервер.
- Экономия ресурсов: Минимизация затрат на серверную инфраструктуру, так как данные передаются напрямую между игроками.

#### Минусы:

- Нестабильность соединения: Зависимость от качества интернет-соединения у каждого игрока может привести к проблемам с
  производительностью.
- Сложности с синхронизацией: Поддержание согласованности состояния игры между игроками может быть проблематичным.
- Масштабируемость: Возникнут проблемы с добавлением турниров, рейтингов, микротранзакций

### Заключение

В результате анализа всех альтернатив было принято решение выбрать серверный подход. Он обеспечивает необходимую
надежность, безопасность и производительность для веб-игры в шашки, что является критически важным для создания
положительного пользовательского опыта.

## Последствия

### Положительные последствия

- Улучшенная производительность
  Централизованное управление состоянием игры позволяет обеспечить мгновенное обновление данных и минимальные задержки,
  что критично для многопользовательского игрового процесса.
  Серверная архитектура позволяет оптимизировать обработку запросов и управление ресурсами, что улучшает общий
  пользовательский опыт.
- Повышенная безопасность
  Серверный подход предоставляет более надежные механизмы защиты данных пользователей, что важно для предотвращения
  мошенничества и обеспечения конфиденциальности.
  Возможность реализации централизованного контроля за действиями игроков помогает в борьбе с читерством.
- Легкость в управлении состоянием игры
  Централизованное хранение состояния игры упрощает синхронизацию между игроками и позволяет избежать проблем с потерей
  данных.
  Это также облегчает реализацию функций, таких как сохранение прогресса и управление матчами.
- Гибкость в разработке
  Серверный подход позволяет использовать различные технологии и инструменты для оптимизации работы сервера, что может
  повысить качество кода и упростить процесс разработки.

### Oтрицательные последствия

- Затраты на инфраструктуру
  Необходимость в управлении серверами может привести к увеличению операционных расходов на хостинг и техническое
  обслуживание.
  Возможно, потребуется выделение ресурсов на мониторинг и администрирование серверов, что увеличит нагрузку на команду
  разработчиков.
- Сложности с масштабированием
  Масштабирование серверной инфраструктуры может потребовать значительных усилий, особенно при резком увеличении числа
  пользователей.
  Это может потребовать дополнительных инвестиций в оборудование или услуги облачных провайдеров.
- Зависимость от серверов
  В случае технических проблем или сбоев на сервере игра может стать недоступной для пользователей, что негативно
  скажется на их опыте.
  Необходимость постоянного подключения к интернету для доступа к игре может ограничить аудиторию.
- Ограничения по географическому расположению
  Задержки могут возникать из-за расстояния между пользователями и серверами, особенно если серверы расположены далеко
  от целевой аудитории.
  Это может привести к различиям в качестве игрового процесса для пользователей из разных регионов.

### Риски

#### 1. Сбои со стороны арендатора сервера

- Описание риска: Сбои или проблемы с хостингом могут привести к недоступности игры для пользователей, что негативно
  скажется на их опыте и может вызвать потерю аудитории.

##### Меры по борьбе с риском:

- Выбор надежного провайдера: Необходимо тщательно оценить репутацию и надежность выбранного хостинг-провайдера, обращая
  внимание на отзывы и историю работы.
- Резервирование ресурсов: Использование нескольких серверов или облачных решений для обеспечения отказоустойчивости и
  возможности быстрого переключения на резервные ресурсы в случае сбоев.
- Мониторинг состояния серверов: Внедрение системы мониторинга для отслеживания состояния серверов в реальном времени,
  что позволит оперативно реагировать на возникающие проблемы.

#### 2. DDoS-атаки

- Описание риска: DDoS-атаки могут перегрузить серверы, приводя к их сбоям и недоступности игры для пользователей. Это
  особенно актуально для игровых сервисов, которые являются популярными целями для злоумышленников.

##### Меры по борьбе с риском:

- Подключение DDoS-защиты: Использование специализированных услуг защиты от DDoS-атак. Это может включать фильтрацию
  трафика на уровне провайдера или использование облачных решений, которые способны справляться с высокими объемами
  атак.
- Аудит безопасности: Проведение регулярного аудита безопасности сервера и архитектуры приложения для выявления
  уязвимостей и их устранения.
- Обучение команды: Обучение команды разработчиков и администраторов методам предотвращения и реагирования на
  DDoS-атаки, что поможет быстро реагировать на инциденты.

## Затронутые области

#### 1. Архитектура сервера

- Серверная инфраструктура: Необходимо будет разрабатывать и поддерживать серверную часть, которая будет обрабатывать
  запросы от пользователей, управлять состоянием игры и обеспечивать взаимодействие между игроками.
- База данных: Потребуется создание или модернизация базы данных для хранения информации о пользователях, их прогрессе,
  статистике игр и других данных, необходимых для функционирования сервиса.

#### 2. Пользовательский интерфейс

- Интерфейс игры: Дизайн и функциональность интерфейса должны быть адаптированы для работы с серверной архитектурой,
  включая обновление состояния игры в реальном времени и отображение информации о других игроках.
- Регистрация и аутентификация: Необходимо реализовать механизмы регистрации и входа пользователей, что потребует
  дополнительных интерфейсных компонентов и взаимодействия с сервером.

#### 3. Безопасность

- Защита данных: Учитывая необходимость защиты пользовательских данных, потребуется внедрение механизмов шифрования и
  безопасной передачи данных между клиентом и сервером.
- Управление доступом: Реализация системы управления доступом для предотвращения несанкционированного доступа к игровым
  данным и функциям.

#### 4. Сетевые взаимодействия

- Протоколы взаимодействия: Необходимо разработать протоколы для обмена данными между клиентом и сервером, что включает
  в себя определение формата сообщений и методов обработки запросов.
- Обработка многопользовательских сессий: Разработка логики для управления многопользовательскими играми, включая
  синхронизацию действий игроков и управление состоянием игры на сервере.

#### 5. Мониторинг и поддержка

- Мониторинг производительности: Внедрение систем мониторинга для отслеживания состояния серверов, производительности
  приложения и выявления потенциальных проблем.
- Обновления и поддержка: Необходимость регулярного обновления серверного программного обеспечения и баз данных для
  обеспечения безопасности и производительности системы.

## История

Изначально рассматривалось p2p подключение, но в процессе обсуждения пришли к тому что, мы хотим видеть перспиктивы по
расширению проекта:

- Система рейтинга
- Турниры
- Задачи для обуения
- Микротранзакции
  Укажите основные обсуждения и изменения, которые привели к окончательному решению.

